{
  "mode_id": "WEATHER",
  "display_name": "天气看板",
  "icon": "weather",
  "cacheable": false,
  "description": "当日天气 + 未来3天预报 + 穿衣建议",
  "content": {
    "type": "composite",
    "steps": [
      {
        "type": "external_data",
        "provider": "weather_forecast",
        "fallback": {
          "city": "",
          "today_temp": "--",
          "today_desc": "暂无数据",
          "today_code": -1,
          "today_low": "--",
          "today_high": "--",
          "today_range": "-- / --",
          "forecast": []
        }
      },
      {
        "type": "llm_json",
        "prompt_template": "你是一位贴心的生活助手。根据以下天气信息，生成一句简短的穿衣建议（20字以内）。只输出 JSON：{\"advice\": \"建议内容\"}\n天气：{context}",
        "output_schema": {
          "advice": {"type": "string", "default": "注意添减衣物"}
        },
        "fallback": {"advice": "注意添减衣物"}
      }
    ],
    "fallback": {
      "city": "",
      "today_temp": "--",
      "today_desc": "暂无数据",
      "today_code": -1,
      "today_low": "--",
      "today_high": "--",
      "today_range": "-- / --",
      "advice": "注意根据天气添减衣物",
      "forecast": []
    },
    "fallback_pool": [
      {"city": "", "today_temp": "--", "today_desc": "暂无数据", "today_code": -1, "today_low": "--", "today_high": "--", "today_range": "-- / --", "advice": "注意根据天气添减衣物", "forecast": []},
      {"city": "", "today_temp": "--", "today_desc": "暂无数据", "today_code": -1, "today_low": "--", "today_high": "--", "today_range": "-- / --", "advice": "早晚温差大，记得带件外套", "forecast": []},
      {"city": "", "today_temp": "--", "today_desc": "暂无数据", "today_code": -1, "today_low": "--", "today_high": "--", "today_range": "-- / --", "advice": "气温适宜，轻装出行", "forecast": []},
      {"city": "", "today_temp": "--", "today_desc": "暂无数据", "today_code": -1, "today_low": "--", "today_high": "--", "today_range": "-- / --", "advice": "有雨记得带伞", "forecast": []},
      {"city": "", "today_temp": "--", "today_desc": "暂无数据", "today_code": -1, "today_low": "--", "today_high": "--", "today_range": "-- / --", "advice": "天冷注意保暖", "forecast": []}
    ]
  },
  "layout": {
    "status_bar": {"line_width": 1, "dashed": false},
    "body_align": "top",
    "body": [
      {
        "type": "text",
        "field": "city",
        "font_size": 16,
        "align": "left",
        "margin_x": 20,
        "max_lines": 1
      },
      {
        "type": "spacer",
        "height": 8
      },
      {
        "type": "two_column",
        "left_width": 170,
        "gap": 6,
        "left_x": 15,
        "left": [
          {
            "type": "big_number",
            "field": "today_temp",
            "font_size": 52,
            "align": "left",
            "margin_x": 0,
            "unit": "°C"
          },
          {
            "type": "spacer",
            "height": 2
          },
          {
            "type": "weather_icon_text",
            "code_field": "today_code",
            "field": "today_desc",
            "font_size": 16,
            "icon_size": 24,
            "align": "left",
            "margin_x": 0
          },
          {
            "type": "spacer",
            "height": 4
          },
          {
            "type": "text",
            "field": "today_range",
            "font_size": 14,
            "align": "left",
            "margin_x": 0,
            "max_lines": 1
          }
        ],
        "right": [
          {
            "type": "forecast_cards",
            "field": "forecast",
            "max_items": 4,
            "margin_x": -4,
            "gap": 4,
            "icon_size": 32
          }
        ]
      },
      {
        "type": "icon_text",
        "icon": "humidity",
        "text": "湿度 {today_humidity}%   {today_wind_dir} {today_wind_level}",
        "font_size": 12,
        "align": "left",
        "margin_x": 15
      },
      {
        "type": "spacer",
        "height": 4
      },
      {
        "type": "two_column",
        "left_width": 220,
        "gap": 4,
        "left_x": 15,
        "left": [
          {
            "type": "icon_text",
            "icon": "sunrise",
            "text": "日出 {sunrise} | 日落 {sunset}",
            "font_size": 12,
            "align": "left",
            "margin_x": 0
          }
        ],
        "right": []
      },
      {
        "type": "spacer",
        "height": 8
      },
      {
        "type": "separator",
        "style": "solid",
        "line_width": 1,
        "margin_x": 20
      },
      {
        "type": "spacer",
        "height": 6
      },
      {
        "type": "text",
        "field": "advice",
        "font_size": 12,
        "align": "center",
        "max_lines": 2
      }
    ],
    "footer": {"label": "WEATHER", "attribution_template": "— InkSight"}
  }
}
